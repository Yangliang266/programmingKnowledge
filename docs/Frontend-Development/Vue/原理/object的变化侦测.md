### 变化侦测

1. 侦测的背景
1. vuejs通过状态生成dom，输出到页面，渲染
   2. 状态的变化使得dom需要重新渲染，需要确定状态发生什么变化
2. 侦测的类型
   1. 拉(angularjs/react)
      1. 定义：不知道哪个状态改变，只知道有变化
   2. 推(vuejs)
      1. 定义：发生变化立即知道哪些状态更改
      2. 特性：细粒度的更新
         1. vue的优化 - 虚拟dom
            1. 一个状态的绑定为一个组件(组件就是vuejs实例)，不再是dom
            2. 状态更改后通知组件，组件内部使用虚拟dom对比
3. 追踪变化
   1. 使用Object.defineProperty 包含 set和get方法
   2. 在getter收集依赖，在setter中触发依赖
4. 收集依赖
   1. 对于使用到数据的地方收集起来，当数据发生变化时，循环触发依赖
5. 依赖的存放
   1. 数组dep
6. 依赖是什么
   1. 依赖即属性发生变化时通知谁
   2. 数据变化时需要通知，使用这个数据的地方很多，依赖可能时模板，可能是watch
   3. watcher即一个集中处理这些情况的抽象类
7. watcher
   1. 相当于一个中介，数据变化通知它，之后它在通知其他
   2. 当data发生改变，依赖会循环触发watcher中的update
8. 侦测所有key - Observer
   1. 将object类型的数据调用walk 将每个属性转化为getter/setter 的形式侦测变化
